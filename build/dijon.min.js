var __extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)};System.register("dijon/interfaces/IAsset",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/IAssetList",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/IBrowser",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/IGameConfig",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/INotification",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/INotifier",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/IObserver",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/IPathConfig",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/ITransitionHandler",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/IPreloadHandler",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/ISound",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/ITiledmapAssets",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces/ITransition",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/interfaces",[],function(t,e){"use strict";e&&e.id;return{setters:[],execute:function(){}}}),System.register("dijon/utils/Device",[],function(t,e){"use strict";var i;e&&e.id;return{setters:[],execute:function(){i=function(){function t(){}return Object.defineProperty(t,"mobile",{get:function(){return t.mobileOS!==t.UNKNOWN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"cocoon",{get:function(){return"undefined"!=typeof navigator.isCocoonJS},enumerable:!0,configurable:!0}),Object.defineProperty(t,"mobileOS",{get:function(){var e=window.navigator.userAgent||window.navigator.vendor||window.opera;return e.match(/iPad/i)||e.match(/iPhone/i)||e.match(/iPod/i)?t.IOS:e.match(/Android/i)?t.ANDROID:t.UNKNOWN},enumerable:!0,configurable:!0}),Object.defineProperty(t,"browser",{get:function(){var t=navigator.userAgent.toLowerCase();return{firefox:t.indexOf("firefox")>-1,ie:t.indexOf("ie")>-1,safari:t.indexOf("safari")>-1,chrome:t.indexOf("chrome")>-1}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"pixelRatio",{get:function(){return void 0!==typeof window.devicePixelRatio?window.devicePixelRatio:1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"customPixelRatio",{get:function(){return t.pixelRatio>=1.5?2:1},enumerable:!0,configurable:!0}),t.IOS="iOS",t.ANDROID="android",t.UNKNOWN="unknown",t}(),t("Device",i)}}}),System.register("dijon/utils/Logger",[],function(t,e){"use strict";var i;e&&e.id;return{setters:[],execute:function(){i=function(){function t(){}return t.log=function(e){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];return t.enabled?(e&&e.constructor&&i.unshift(e.constructor.toString().match(/\w+/g)[1]+" ::"),console.log.apply(console,i)):void 0},t.enabled=!0,t}(),t("Logger",i)}}}),System.register("dijon/utils/Notifications",[],function(t,e){"use strict";var i;e&&e.id;return{setters:[],execute:function(){i=function(){function t(){}return t.ASSET_MANAGER_DATA_SET="dijonAssetManagerDataSet",t.ASSET_MANAGER_ASSETS_CLEARED="dijonAssetManagerAssetsCleared",t.MOUSE_LEAVE_GLOBAL="mouseOutGlobal",t.MOUSE_ENTER_GLOBAL="mouseEnterGlobal",t}(),t("Notifications",i)}}}),System.register("dijon/utils/Textures",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){}return Object.defineProperty(t,"game",{get:function(){return i.Application.getInstance().game},enumerable:!0,configurable:!0}),t.rect=function(e,i,n,o,s,a,r,h,d){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=16777215),void 0===o&&(o=1),void 0===s&&(s=!0),void 0===a&&(a=16777215),void 0===r&&(r=1),void 0===h&&(h=1),void 0===d&&(d=!1);var u=t.game.add.graphics(0,0);s&&u.beginFill(n,o),d&&(u.lineWidth=r,u.lineStyle(r,a,h)),u.drawRect(0,0,e,i);var c=u.generateTexture();return t.game.world.remove(u),c},t.roundedRect=function(e,i,n,o,s,a,r,h,d,u){void 0===e&&(e=100),void 0===i&&(i=100),void 0===n&&(n=10),void 0===o&&(o=16777215),void 0===s&&(s=1),void 0===a&&(a=!0),void 0===r&&(r=16777215),void 0===h&&(h=1),void 0===d&&(d=1),void 0===u&&(u=!1);var c=t.game.add.graphics(0,0);a&&c.beginFill(o,s),u&&(c.lineWidth=h,c.lineStyle(h,r,d)),c.drawRoundedRect(0,0,e,i,n);var l=c.generateTexture();return t.game.world.remove(c),l},t.square=function(e,i,n,o,s,a,r,h){return void 0===e&&(e=100),void 0===i&&(i=16777215),void 0===n&&(n=1),void 0===o&&(o=!0),void 0===s&&(s=16777215),void 0===a&&(a=1),void 0===r&&(r=1),void 0===h&&(h=!1),t.rect(e,e,i,n,o,s,a,r,h)},t.circle=function(e,i,n,o,s,a,r,h){void 0===e&&(e=100),void 0===i&&(i=16777215),void 0===n&&(n=1),void 0===o&&(o=!0),void 0===s&&(s=16777215),void 0===a&&(a=1),void 0===r&&(r=1),void 0===h&&(h=!1);var d=t.game.add.graphics(0,0);o&&d.beginFill(i,n),h&&(d.lineWidth=a,d.lineStyle(a,s,r)),d.drawCircle(0,0,e);var u=d.generateTexture();return t.game.world.remove(d),u},t.ellipse=function(e,i,n,o,s,a,r,h,d){void 0===e&&(e=50),void 0===i&&(i=100),void 0===n&&(n=16777215),void 0===o&&(o=1),void 0===s&&(s=!0),void 0===a&&(a=16777215),void 0===r&&(r=1),void 0===h&&(h=1),void 0===d&&(d=!1);var u=t.game.add.graphics(0,0);s&&u.beginFill(n,o),d&&(u.lineWidth=r,u.lineStyle(r,a,h)),u.drawEllipse(0,0,.5*e,.5*i);var c=u.generateTexture();return t.game.world.remove(u),c},t}(),t("Textures",n)}}}),System.register("dijon/display/BitmapText",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(e,n,o,s,a,r,h,d,u,c){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=null),void 0===s&&(s=""),void 0===a&&(a=12),void 0===r&&(r="left"),void 0===h&&(h=16777215),void 0===d&&(d=!0),void 0===u&&(u=!0),void 0===c&&(c=!1),t.call(this,i.Application.getInstance().game,e,n,o,s,a,r),this._autoFlatten=!0,this._color=16777215,this._isImage=!1,this._internalImage=null,this._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds(),e=this.game.resolution;if(this._cachedSprite)this._cachedSprite.texture.resize(t.width*e|0,t.height*e|0);else{var i=new PIXI.RenderTexture(t.width*e|0,t.height*e|0);i.baseTexture.resolution=e,this._cachedSprite=new PIXI.Sprite(i),this._cachedSprite.texture.resolution=e,this._cachedSprite.worldTransform=this.worldTransform}var n=this._filters;this._filters=null,this._cachedSprite.filters=n,PIXI.DisplayObject._tempMatrix.tx=-t.x,PIXI.DisplayObject._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,PIXI.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=n,this._cacheAsBitmap=!0,this.setHitAreaToBounds()},this.setHitAreaToBounds=function(){this.hitArea=this.getBounds()},d!==!0&&(this.smoothed=!1),c!==!0?(16777215!==h&&(this.color=h),this.autoFlatten=u):(this.makeImage(),16777215!==h&&(this.color=h))}return __extends(e,t),e.prototype.makeImage=function(){this._isImage=!0,this._alignToNearestPixel(),this._internalImage=this.addChildAt(this.game.add.image(0,0,this.generateTexture(this.game.resolution,PIXI.scaleModes.DEFAULT)),0),this.destroyGlyphs()},e.prototype.destroyGlyphs=function(){for(var t=this.children.length-1;t>(this._isImage?0:-1);)this.removeChildAt(t),t--;for(var e=this._glyphs,i=0;i<e.length;i++)e[i].destroy();this._glyphs=[]},e.prototype.flatten=function(t){var e=this;return void 0===t&&(t=null),t?void this.game.time.events.add(t,function(){e.cacheAsBitmap=!0},this):(this._alignToNearestPixel(),void(this.cacheAsBitmap=!0))},e.prototype.unFlatten=function(){this.cacheAsBitmap=null},Object.defineProperty(e.prototype,"autoFlatten",{get:function(){return this._autoFlatten},set:function(t){this._autoFlatten=t,this._autoFlatten?this.flatten():this.unFlatten()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){this._autoFlatten&&this.unFlatten(),this._color=t,this._isImage?this._internalImage.tint=this._color:this.tint=this._color,this._autoFlatten&&this.flatten()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._autoFlatten&&this.unFlatten(),void 0!==this._text&&t!==this._text&&(this._text=t.toString()||"",this.destroyGlyphs(),this.updateText()),this._autoFlatten?this.flatten():this._alignToNearestPixel()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this.getBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realHeight",{get:function(){return this.getBounds().height},enumerable:!0,configurable:!0}),e.prototype._alignToNearestPixel=function(){this.x=Math.round(this.x),this.y=Math.round(this.y),this.children.forEach(function(t){t.x=Math.round(t.x),t.y=Math.round(t.y)})},e.prototype.highlight=function(t,e){if(this._isImage)return console.log("BitmapText:: cannot highlight a substring of a BitmapText instance when makeImage is set to true",this.text),!1;if(this.text.indexOf(t)<0)return!1;var i,n=this.text.indexOf(t)-1,o=n+t.length;this._autoFlatten&&this.unFlatten();for(var s=n;o>s;s++)i=this.getChildAt(s),i.tint=e;return this._autoFlatten?this.flatten():this._alignToNearestPixel(),!0},e.prototype.anchorAsImage=function(t,e){void 0===e&&(e=t);var i=this.cacheAsBitmap;this.cacheAsBitmap=null,this._internalImage.anchor.set(t,e),this.cacheAsBitmap=i},e}(Phaser.BitmapText),t("BitmapText",n)}}}),System.register("dijon/display/Component",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){this.game=i.Application.getInstance().game,this.name="Component"}return t.prototype.setOwner=function(t){this.owner=t},t.prototype.init=function(){},t.prototype.buildInterface=function(){},t.prototype.update=function(){},t.prototype.destroy=function(){},t}(),t("Component",n)}}}),System.register("dijon/display/Group",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(e,n,o,s,a,r,h){void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o="dGroup"),void 0===s&&(s=!1),void 0===a&&(a=null),t.call(this,i.Application.getInstance().game,null,o,s,r,h),this.name=o,this._hasComponents=!1,this._componentKeys=[],this._components={},this._mediator=null,this.addComponents=function(t){if("undefined"==typeof t.length)throw new Error("Dijon.UIGroup components must be an array");for(;t.length>0;)this.addComponent(t.shift())},this.position.set(e,n),s||this.game.add.existing(this),a&&this.addComponents(a)}return __extends(e,t),e.CreateFromData=function(t){var i=new e(t.position.x,t.position.y,t.name);return t.alpha&&(i.alpha=t.alpha),i},e.prototype.assignPrefab=function(t){},e.prototype.update=function(){t.prototype.update.call(this),this._hasComponents&&this.updateComponents()},e.prototype.destroy=function(){this.removeAllComponents(),this.removeMediator(),t.prototype.destroy.call(this)},e.prototype.init=function(){},e.prototype.buildInterface=function(){},e.prototype._updateComponentKeys=function(){this._componentKeys=Object.keys(this._components),this._hasComponents=this._componentKeys.length>0},e.prototype.addComponent=function(t){return t.setOwner(this),t.init(),t.buildInterface(),this._components[t.name]=t,this._updateComponentKeys(),t},e.prototype.updateComponents=function(){var t=this;this._componentKeys.forEach(function(e){t.updateComponent(e)})},e.prototype.updateComponent=function(t){this._components[t].update()},e.prototype.removeAllComponents=function(){for(;this._componentKeys.length>0;)this.removeComponent(this._componentKeys.pop())},e.prototype.removeComponent=function(t){"undefined"!=typeof this._components[t]&&(this._components[t].destroy(),this._components[t]=null,delete this._components[t],this._updateComponentKeys())},e.prototype.flatten=function(t){var e=this;void 0===t&&(t=0),0===t?this.cacheAsBitmap=!0:this.game.time.events.add(t,function(){e.cacheAsBitmap=!0},this)},e.prototype.unFlatten=function(){this.cacheAsBitmap=null},e.prototype.removeMediator=function(){this._mediator&&(this._mediator.destroy(),this._mediator=null)},Object.defineProperty(e.prototype,"addInternal",{get:function(){return this.game.add.targetGroup=this,this.game.add},enumerable:!0,configurable:!0}),e}(Phaser.Group),t("Group",n)}}}),System.register("dijon/display/Sprite",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(e,n,o,s,a,r){void 0===a&&(a="dSprite"),void 0===r&&(r=null),t.call(this,i.Application.getInstance().game,e,n,o,s),this.name=a,this._hasComponents=!1,this._componentKeys=[],this._components={},this.addComponents=function(t){if("undefined"==typeof t.length)throw new Error("Dijon.UIGroup components must be an array");for(;t.length>0;)this.addComponent(t.shift())},r&&this.addComponents(r)}return __extends(e,t),e.CreateFromData=function(t){var i=new e(t.position.x,t.position.y,t.key,t.frame,t.name);return t.anchor&&i.anchor.setTo(t.anchor.x,t.anchor.y),t.scale&&i.scale.setTo(t.scale.x,t.scale.y),t.angle&&(i.angle=t.angle),t.tint&&(i.tint=t.tint),t.alpha&&(i.alpha=t.alpha),i},e.prototype.assignPrefab=function(t){},e.prototype.update=function(){this._hasComponents&&this.updateComponents()},e.prototype.destroy=function(){this.removeAllComponents(),t.prototype.destroy.call(this)},e.prototype.init=function(){},e.prototype.buildInterface=function(){},e.prototype._updateComponentKeys=function(){this._componentKeys=Object.keys(this._components),this._hasComponents=this._componentKeys.length>0},e.prototype.addComponent=function(t){return t.setOwner(this),t.init(),t.buildInterface(),this._components[t.name]=t,this._updateComponentKeys(),t},e.prototype.updateComponents=function(){var t=this;this._componentKeys.forEach(function(e){t.updateComponent(e)})},e.prototype.updateComponent=function(t){this._components[t].update()},e.prototype.removeAllComponents=function(){for(;this._componentKeys.length>0;)this.removeComponent(this._componentKeys.pop())},e.prototype.removeComponent=function(t){"undefined"!=typeof this._components[t]&&(this._components[t].destroy(),this._components[t]=null,delete this._components[t],this._updateComponentKeys())},e.prototype.flatten=function(t){var e=this;void 0===t&&(t=0),0===t?this.cacheAsBitmap=!0:this.game.time.events.add(t,function(){e.cacheAsBitmap=!0},this)},e.prototype.unFlatten=function(){this.cacheAsBitmap=null},Object.defineProperty(e.prototype,"resolution",{get:function(){return this.texture.baseTexture.resolution},enumerable:!0,configurable:!0}),e}(Phaser.Sprite),t("Sprite",n)}}}),System.register("dijon/display/InvisibleButton",["dijon/display/Sprite"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(e,i,n,o,s){t.call(this,e,i,null,null,n),this.init(),this.buildInterface(),this.setSize(o,s)}return __extends(e,t),e.prototype.init=function(){this.inputEnabled=!0},e.prototype.buildInterface=function(){this._addHitRect()},e.prototype._addHitRect=function(){this._hitWidth>0&&this._hitHeight>0&&(this.hitArea=new Phaser.Rectangle(0,0,this._hitWidth,this._hitHeight))},e.prototype.setSize=function(t,e){this._hitWidth=t||0,this._hitHeight=e||0,this._addHitRect()},e}(i.Sprite),t("InvisibleButton",n)}}}),System.register("dijon/display/NineSliceImage",["dijon/display/Group"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(e,i,n,o,s,a,r,h,d,u,c){void 0===r&&(r=!0),t.call(this,e,i),this.key=s,this.texturePath=a,this.fillMiddle=r,this.topHeight=h,this.rightWidth=d,this.bottomHeight=u,this.leftWidth=c,this._interactiveBacking=null,this._inputEnabled=!1,this._currentBounds=null,this.__width=Math.round(n),this.__height=Math.round(o),this._build(),this.game.time.events.add(10,this.dFlatten,this)}return __extends(e,t),e.prototype._build=function(){this._inputLayer=this.add(this.game.add.group()),this._displayLayer=this.add(this.game.add.group()),this.tl=this._displayLayer.add(this.game.add.image(0,0,this.key,this.texturePath+"/tl")),this.tr=this._displayLayer.add(this.game.add.image(this.__width,0,this.key,this.texturePath+"/tr")),this.t=this._displayLayer.add(this.game.add.tileSprite(Math.floor(this.tl.getBounds().width),0,Math.ceil(this.__width-this.tl.getBounds().width-this.tr.getBounds().width),this.topHeight||this.tl.getBounds().height,this.key,this.texturePath+"/t")),this.l=this._displayLayer.add(this.game.add.tileSprite(0,Math.floor(this.tl.getBounds().height),Math.ceil(this.leftWidth||this.tl.getBounds().width),100,this.key,this.texturePath+"/l")),this.bl=this._displayLayer.add(this.game.add.image(0,this.__height,this.key,this.texturePath+"/bl")),this.l.height=Math.ceil(this.__height-this.tl.getBounds().height-this.bl.getBounds().height),this.b=this._displayLayer.add(this.game.add.tileSprite(Math.floor(this.bl.getBounds().width),this.__height,100,this.bottomHeight||this.bl.getBounds().height,this.key,this.texturePath+"/b")),this.br=this._displayLayer.add(this.game.add.image(this.__width,this.__height,this.key,this.texturePath+"/br")),this.b.width=Math.ceil(this.__width-this.bl.getBounds().width-this.br.getBounds().width),this.r=this._displayLayer.add(this.game.add.tileSprite(this.__width,Math.floor(this.tr.getBounds().height),Math.ceil(this.rightWidth||this.tr.getBounds().width),Math.ceil(this.__height-this.tl.getBounds().height-this.br.getBounds().height),this.key,this.texturePath+"/r")),this.tr.setPivot("tr"),this.r.setPivot("tr"),this.br.setPivot("br"),this.b.setPivot("bl"),this.bl.setPivot("bl"),this.fillMiddle&&(this.tile=this._displayLayer.add(this.game.add.tileSprite(this.tl.getBounds().width-1,this.tl.getBounds().height-1,this.__width-this.tl.getBounds().width-this.tr.getBounds().width+2,this.__height-this.tl.getBounds().height-this.br.getBounds().height+4,this.key,this.texturePath+"/tile")),this.sendToBack(this.tile))},e.prototype._addInteractiveBacking=function(){var t=this.game.add.graphics();t.beginFill(16711680,0),t.drawRect(this.x,this.y,this.__width,this.__height),t.endFill(),this._interactiveBacking=this._inputLayer.add(this.game.add.image(0,0,t.generateTexture())),this._interactiveBacking.inputEnabled=!0,this.game.world.remove(t)},e.prototype._setSize=function(){this.dUnflatten(),this.t.width=this.b.width=Math.ceil(this.__width-this.tl.getBounds().width-this.tr.getBounds().width|0),this.r.x=this.tr.x=this.br.x=0|this.__width,this.l.height=this.r.height=this.__height-this.tr.getBounds().height-this.bl.getBounds().height|0,this.bl.y=this.b.y=this.br.y=0|this.__height,this.fillMiddle&&(this.tile.width=Math.ceil(this.__width-this.tr.getBounds().width-this.tl.getBounds().width+4),this.tile.height=Math.ceil(this.__height-this.tl.getBounds().height-this.bl.getBounds().height+4)),null!=this._interactiveBacking&&(console.log("new width",this.__width),this._interactiveBacking.width=this.__width,this._interactiveBacking.height=this.__height),this.game.time.events.add(10,this.dFlatten,this)},e.prototype._addInput=function(){this._interactiveBacking||this._addInteractiveBacking()},e.prototype._removeInput=function(){this._interactiveBacking&&(this._interactiveBacking.inputEnabled=!1)},e.prototype.dUnflatten=function(){this._displayLayer.cacheAsBitmap=null},e.prototype.dFlatten=function(){this._displayLayer.cacheAsBitmap=!0},Object.defineProperty(e.prototype,"inputEnabled",{set:function(t){this._inputEnabled=t,this._inputEnabled?this._addInput():this._removeInput()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this._interactiveBacking&&this._interactiveBacking.inputEnabled?this._interactiveBacking.events:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"input",{get:function(){return this._interactiveBacking.input},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hSize",{get:function(){return this.__width},set:function(t){this.__width=t,this._setSize()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vSize",{get:function(){return this.__height},set:function(t){this.__height=t,this._setSize()},enumerable:!0,configurable:!0}),e.prototype.setSize=function(t,e){this.__width=t,this.__height=e,this._setSize()},Object.defineProperty(e.prototype,"interactiveBacking",{get:function(){return this._interactiveBacking},enumerable:!0,configurable:!0}),e}(i.Group),t("NineSliceImage",n)}}}),System.register("dijon/display/Spine",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(n,o,s,a){void 0===n&&(n=""),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=1),t.call(this,i.Application.getInstance().game,o,s,e.createSpineData(e.LOAD_NON_MESH?n+e.NON_MESH_SUFFIX:n,a)),this.assetName=n,this.skeletonScale=a,this.debug=!1,this._created=!1,this.onCreate=new Phaser.Signal,this.onAnimationComplete=null,this.onMeshSwap=new Phaser.Signal,this._canUpdate=!0,this._paused=!1,this._speed=1,this._skeletonScale=1,this._boundsOffset=new Phaser.Point(0,0),this._boundsWidthScale=1,this._boundsHeightScale=1,this._currentBounds=new PIXI.Rectangle,this._physicsOffset={x:0,y:0},this._physicsEnabled=!1,this.nonMeshVersion=!1,this._skeletonScale=a,e.LOAD_NON_MESH&&(this.nonMeshVersion=!0),e.initialize(),e.onNonMeshFPS.addOnce(this.loadNonMeshVersion,this),this.name=n,this.skeleton.setToSetupPose(),this._createBounds(),this.update(0),this.autoUpdate=!1,this.onAnimationComplete=this.state.onAnimationComplete,this.hitArea=new Phaser.Rectangle(0,-this.skeleton.data.height,this.skeleton.data.width,this.skeleton.data.height),e.AUTO_MESH&&e.LOAD_NON_MESH!==!0&&e.detectAutoMesh()}return __extends(e,t),e.prototype._onCreateInternal=function(){this._created=!0,this._create(),this.onCreate.dispatch(),this._canUpdate=!0},e.prototype._create=function(){},e.prototype.destroy=function(){if(this.skeleton=null,this.state=null,this.stateData=null,this.spineData=null,this.slotContainers&&this.slotContainers.length>0)for(;this.slotContainers.length>0;)this.slotContainers.shift().destroy(!0,!0);this.slotContainers=null,this.removeChildren(),t.prototype.destroy.call(this)},e.prototype.update=function(i){void 0===i&&(i=e.DEFAULT_SPEED),!this._created&&this.parent&&this._onCreateInternal(),!this._paused&&this._canUpdate&&(this._physicsEnabled===!0&&(this.x=this.physicsSprite.body.position.x+this._physicsOffset.x,this.y=this.physicsSprite.body.position.y+this._physicsOffset.y+(this.scale.y>0?this.physicsSprite.body.height:0)),t.prototype.update.call(this,this._speed*i))},e.prototype.initPhysics=function(t,e){return this._createBounds(),t!=Phaser.Physics.ARCADE&&t!=Phaser.Physics.NINJA&&t!=Phaser.Physics.P2JS?!1:(void 0!==e.x&&(this._physicsOffset.x=e.x),void 0!==e.y&&(this._physicsOffset.y=e.y),this.physicsSprite=this.parent.addChild(this.game.add.sprite(this.x+this._physicsOffset.x,this.y-this._physicsOffset.y)),this.physicsSprite.name=this.assetName+"_physicsSprite",this.game.physics.enable(this.physicsSprite,t),this._physicsEnabled=null!==this.physicsSprite.body,this._physicsEnabled)},e.prototype.disablePhysics=function(){this._physicsEnabled=!1},e.prototype.enablePhysics=function(){this._physicsEnabled=!0},e.prototype.loadNonMeshVersion=function(){var t=this;if(this.nonMeshVersion!==!0){this.nonMeshVersion=!0,this.alpha=0;for(var i=this.state.tracks,n=this.state.onAnimationComplete;this.children.length>0;)this.removeChildAt(0).destroy();this.setup(e.createSpineData(this.name+e.NON_MESH_SUFFIX,this._skeletonScale)),this.state.apply(this.skeleton),this.state.tracks=i,null!==n?(this.state.onAnimationComplete.removeAll(),this.state.onAnimationComplete.dispose(),this.state.onAnimationComplete=null,this.onAnimationComplete=null,this.state.onAnimationComplete=n):this.state.onAnimationComplete=new Phaser.Signal,this.onAnimationComplete=this.state.onAnimationComplete,this.game.asset.clearSpineAsset(this.name),this.game.time.events.add(100,function(){t.alpha=1},this),this.onMeshSwap.dispatch()}},e.createSpineData=function(t,e){void 0===e&&(e=1);var n=PIXI.spine,o=new n.SpineRuntime.Atlas(i.Application.getInstance().game.cache.getText(t+".atlas"),this.atlasCallbackFunction),s=new n.SpineRuntime.SkeletonJsonParser(new n.SpineRuntime.AtlasAttachmentParser(o),e),a=s.readSkeletonData(i.Application.getInstance().game.cache.getJSON(t+".json"));return a},e.atlasCallbackFunction=function(t,e){var n=t.split("@"+i.Application.getInstance().game.resolution+"x"),o=n.join("");e(new PIXI.BaseTexture(i.Application.getInstance().game.cache.getImage(o),PIXI.scaleModes.DEFAULT))},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsOffset",{get:function(){return this._boundsOffset},set:function(t){this._boundsOffset=t,this._currentBounds=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsWidthScale",{get:function(){return this._boundsWidthScale},set:function(t){this._boundsWidthScale=t,this._currentBounds=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsHeightScale",{get:function(){return this._boundsHeightScale},set:function(t){this._boundsHeightScale=t,this._currentBounds=null},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(){return this._currentBounds||this._createBounds()},e.prototype._createBounds=function(){return this._currentBounds=new PIXI.Rectangle(this.x+this._boundsOffset.x*this.scale.x,this.y-this.skeleton.data.height*this.scale.y+this._boundsOffset.y*this.scale.y,this.skeleton.data.width*Math.abs(this.scale.x)*this.boundsWidthScale,this.skeleton.data.height*Math.abs(this.scale.y)*this.boundsHeightScale),this._currentBounds},e.prototype.setScale=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),null!==t&&(this.scale.x=t),null!==e&&(this.scale.y=e),this._currentBounds=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.getBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._physicsEnabled?this.physicsSprite.body:null},enumerable:!0,configurable:!0}),e.initialize=function(){e.INITIALIZED||(e.INITIALIZED=!0,e.game=i.Application.getInstance().game,e.onNonMeshFPS=new Phaser.Signal)},e.detectAutoMesh=function(){e.game.time.advancedTiming=!0,e.game.time.events.add(2e3,e.checkNonMeshThreshold,e)},e.destroyNonMeshTimer=function(){null!==e.nonMeshTimer&&(e.game.time.events.remove(e.nonMeshTimer),e.nonMeshTimer=null)},e.checkNonMeshThreshold=function(){e.destroyNonMeshTimer(),e.nonMeshTimer=e.game.time.events.repeat(500,10,e.checkAutoMeshFPS,e),e.game.time.events.add(5500,e.disableAdvancedTiming,e)},e.checkAutoMeshFPS=function(){e.game.time.fps<e.NON_MESH_FPS&&(e.destroyNonMeshTimer(),e.LOAD_NON_MESH=!0,e.onNonMeshFPS.dispatch(),e.disableAdvancedTiming())},e.disableAdvancedTiming=function(){e.game.time.advancedTiming=!1},e.setAutoMesh=function(t,i,n){void 0===t&&(t=!0),void 0===i&&(i=e.DEFAULT_NON_MESH_SUFFIX),void 0===n&&(n=e.DEFAULT_NON_MESH_FPS),e.AUTO_MESH=t,e.NON_MESH_SUFFIX=i,e.NON_MESH_FPS=n},e.DEFAULT_SPEED=.0167,e.INITIALIZED=!1,e.game=null,e.nonMeshTimer=null,e.LOAD_NON_MESH=!1,e.AUTO_MESH=!1,e.DEFAULT_NON_MESH_SUFFIX="_nomesh",e.NON_MESH_SUFFIX=null,e.DEFAULT_NON_MESH_FPS=35,e.NON_MESH_FPS=null,e}(PIXI.spine.Spine),t("Spine",n)}}}),System.register("dijon/display/Spine2",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(n,o,s,a){void 0===n&&(n=""),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=1),t.call(this,i.Application.getInstance().game,o,s,e.createSpineData(e.LOAD_NON_MESH?n+e.NON_MESH_SUFFIX:n,a)),this.assetName=n,this.skeletonScale=a,this.debug=!1,this._created=!1,this.onCreate=new Phaser.Signal,this.onAnimationComplete=null,this.onMeshSwap=new Phaser.Signal,this._canUpdate=!0,this._paused=!1,this._speed=1,this._skeletonScale=1,this._boundsOffset=new Phaser.Point(0,0),this._boundsWidthScale=1,this._boundsHeightScale=1,this._currentBounds=new PIXI.Rectangle,this._physicsOffset={x:0,y:0},this._physicsEnabled=!1,this.nonMeshVersion=!1,this._skeletonScale=a,e.LOAD_NON_MESH&&(this.nonMeshVersion=!0),e.initialize(),e.onNonMeshFPS.addOnce(this.loadNonMeshVersion,this),this.name=n,this.skeleton.setToSetupPose(),this._createBounds(),this.update(0),this.autoUpdate=!1,this.onAnimationComplete=this.state.onAnimationComplete,this.hitArea=new Phaser.Rectangle(0,-this.skeleton.data.height,this.skeleton.data.width,this.skeleton.data.height),e.AUTO_MESH&&e.LOAD_NON_MESH!==!0&&e.detectAutoMesh()}return __extends(e,t),e.prototype._onCreateInternal=function(){this._created=!0,this._create(),this.onCreate.dispatch(),this._canUpdate=!0},e.prototype._create=function(){},e.prototype.destroy=function(){if(this.skeleton=null,this.state=null,this.stateData=null,this.spineData=null,this.slotContainers&&this.slotContainers.length>0)for(;this.slotContainers.length>0;)this.slotContainers.shift().destroy(!0,!0);this.slotContainers=null,t.prototype.destroy.call(this)},e.prototype.update=function(i){void 0===i&&(i=e.DEFAULT_SPEED),!this._created&&this.parent&&this._onCreateInternal(),!this._paused&&this._canUpdate&&t.prototype.update.call(this,this._speed*i)},e.prototype.initPhysics=function(t){return this._createBounds(),t!=Phaser.Physics.ARCADE&&t!=Phaser.Physics.NINJA&&t!=Phaser.Physics.P2JS?!1:(t===Phaser.Physics.ARCADE?this.game.physics.arcade.enable(this,!1):this.game.physics.enable(this,t),this._physicsEnabled=null!==this.body,this._physicsEnabled)},e.prototype.disablePhysics=function(){this._physicsEnabled=!1},e.prototype.enablePhysics=function(){this._physicsEnabled=!0},e.prototype.loadNonMeshVersion=function(){var t=this;if(this.nonMeshVersion!==!0){this.nonMeshVersion=!0,this.alpha=0;for(var i=this.state.tracks,n=this.state.onAnimationComplete;this.children.length>0;)this.removeChildAt(0).destroy();this.setup(e.createSpineData(this.name+e.NON_MESH_SUFFIX,this._skeletonScale)),this.state.apply(this.skeleton),this.state.tracks=i,null!==n?(this.state.onAnimationComplete.removeAll(),this.state.onAnimationComplete.dispose(),this.state.onAnimationComplete=null,this.onAnimationComplete=null,this.state.onAnimationComplete=n):this.state.onAnimationComplete=new Phaser.Signal,this.onAnimationComplete=this.state.onAnimationComplete,this.game.asset.clearSpineAsset(this.name),this.game.time.events.add(100,function(){t.alpha=1},this),this.onMeshSwap.dispatch()}},e.createSpineData=function(t,e){void 0===e&&(e=1);var n=PIXI.spine,o=new n.SpineRuntime.Atlas(i.Application.getInstance().game.cache.getText(t+".atlas"),this.atlasCallbackFunction),s=new n.SpineRuntime.SkeletonJsonParser(new n.SpineRuntime.AtlasAttachmentParser(o),e),a=s.readSkeletonData(i.Application.getInstance().game.cache.getJSON(t+".json"));
return a},e.atlasCallbackFunction=function(t,e){var n=t.split("@"+i.Application.getInstance().game.resolution+"x"),o=n.join("");e(new PIXI.BaseTexture(i.Application.getInstance().game.cache.getImage(o),PIXI.scaleModes.DEFAULT))},Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsOffset",{get:function(){return this._boundsOffset},set:function(t){this._boundsOffset=t,this._currentBounds=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsWidthScale",{get:function(){return this._boundsWidthScale},set:function(t){this._boundsWidthScale=t,this._currentBounds=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundsHeightScale",{get:function(){return this._boundsHeightScale},set:function(t){this._boundsHeightScale=t,this._currentBounds=null},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(){return this._currentBounds||this._createBounds()},e.prototype._createBounds=function(){return this._currentBounds=new PIXI.Rectangle(this.x+this._boundsOffset.x*this.scale.x,this.y-this.skeleton.data.height*this.scale.y+this._boundsOffset.y*this.scale.y,this.skeleton.data.width*Math.abs(this.scale.x)*this.boundsWidthScale,this.skeleton.data.height*Math.abs(this.scale.y)*this.boundsHeightScale),this._currentBounds},e.prototype.setScale=function(t,e){void 0===t&&(t=null),void 0===e&&(e=null),null!==t&&(this.scale.x=t),null!==e&&(this.scale.y=e),this._currentBounds=null},Object.defineProperty(e.prototype,"width",{get:function(){return this.getBounds().width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.getBounds().height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"arcadeBody",{get:function(){return this.body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"created",{get:function(){return this._created},enumerable:!0,configurable:!0}),e.initialize=function(){e.INITIALIZED||(e.INITIALIZED=!0,e.game=i.Application.getInstance().game,e.onNonMeshFPS=new Phaser.Signal)},e.detectAutoMesh=function(){e.game.time.advancedTiming=!0,e.game.time.events.add(2e3,e.checkNonMeshThreshold,e)},e.destroyNonMeshTimer=function(){null!==e.nonMeshTimer&&(e.game.time.events.remove(e.nonMeshTimer),e.nonMeshTimer=null)},e.checkNonMeshThreshold=function(){e.destroyNonMeshTimer(),e.nonMeshTimer=e.game.time.events.repeat(500,10,e.checkAutoMeshFPS,e),e.game.time.events.add(5500,e.disableAdvancedTiming,e)},e.checkAutoMeshFPS=function(){e.game.time.fps<e.NON_MESH_FPS&&(e.destroyNonMeshTimer(),e.LOAD_NON_MESH=!0,e.onNonMeshFPS.dispatch(),e.disableAdvancedTiming())},e.disableAdvancedTiming=function(){e.game.time.advancedTiming=!1},e.setAutoMesh=function(t,i,n){void 0===t&&(t=!0),void 0===i&&(i=e.DEFAULT_NON_MESH_SUFFIX),void 0===n&&(n=e.DEFAULT_NON_MESH_FPS),e.AUTO_MESH=t,e.NON_MESH_SUFFIX=i,e.NON_MESH_FPS=n},e.DEFAULT_SPEED=.0167,e.INITIALIZED=!1,e.game=null,e.nonMeshTimer=null,e.LOAD_NON_MESH=!1,e.AUTO_MESH=!1,e.DEFAULT_NON_MESH_SUFFIX="_nomesh",e.NON_MESH_SUFFIX=null,e.DEFAULT_NON_MESH_FPS=35,e.NON_MESH_FPS=null,e}(PIXI.spine.Spine),t("Spine2",n)}}}),System.register("dijon/display/Text",["dijon/application","dijon/utils"],function(t,e){"use strict";var i,n,o;e&&e.id;return{setters:[function(t){i=t},function(t){n=t}],execute:function(){o=function(t){function e(n,o,s,a,r,h,d,u,c,l,p){void 0===s&&(s=""),void 0===r&&(r=e.DEFAULT_FONT_SIZE),void 0===h&&(h=e.DEFAULT_FONT_COLOR),void 0===d&&(d="left"),void 0===u&&(u=!1),void 0===c&&(c=0),void 0===l&&(l=0),void 0===p&&(p=null),t.call(this,i.Application.getInstance().game,n,o,s,e._addSettings({font:r+"px "+a,fill:h,align:d,wordWrap:u,wordWrapWidth:c},p)),this.lineSpacing=l,this.onAnimationComplete=new Phaser.Signal,this._canUpdate=!1,this._textToAnimate=[],this.stopAnimating=function(){this._canUpdate=!1,this._textToAnimate=null,this.game.time.events.remove(this._delayTimer),this.game.time.events.remove(this._repeatTimer)},this.roundPixel=function(){this.position.set(Math.round(this.x),Math.round(this.y))},this.text=s.replace(/'/g,"'"),this._lowercaseText=this.text.toLowerCase(),this.setResolution()}return __extends(e,t),e.CreateFromData=function(t){var i=new e(t.position.x,t.position.y,t.copy,t.fontName,t.fontSize,"#"+t.fontColor,t.alignment,t.wrapWidth>0,t.wrapWidth>0?t.wrapWidth:null,t.spacing);switch(i.name=t.name,""!=t.stroke&&(i.stroke=t.stroke),t.shadowColor&&i.setShadow(t.shadowX,t.shadowY,t.shadowColor),t.scale&&i.scale.setTo(t.scale.x,t.scale.y),t.anchor&&(i.pivot=new Phaser.Point(t.anchor.x,t.anchor.y)),t.alignment){case"center":i.x-=.5*i.realWidth;break;case"right":i.x-=i.realWidth}return i.x=Math.round(i.x),i.y=Math.round(i.y),i.alpha=t.alpha?t.alpha:1,i},e.prototype.assignPrefab=function(t){},e.prototype.setText=function(e){return t.prototype.setText.call(this,e),this._lowercaseText=this.text.toLowerCase(),this.setResolution(),this},e.prototype.setResolution=function(){this.game&&n.Device.cocoon&&n.Device.cocoon&&(this.resolution=this.game.resolution*this.game.resolution)},e.prototype._startTextAnimation=function(){this._canUpdate=!0,this._repeatTimer=this.game.time.events.repeat(100*this._letterTime,this._textLength,this._updateTextAnimation,this)},e.prototype._updateTextAnimation=function(){if(!this._canUpdate||!this._textToAnimate)return!1;var t=this._textLength-this._textToAnimate.length;this.addColor(this.style.fill,t),this.addColor("rgba(0,0,0,0)",t+1),this._textToAnimate.shift(),0===this._textToAnimate.length&&this.onAnimationComplete.dispatch()},e.prototype.setColor=function(t){return this.highlightPhrase(this.text,t,!1)},e.prototype.resetColor=function(){return this.highlightPhrase(this.text,this.style.fill,!1)},e.prototype.highlightPhrase=function(t,e,i){void 0===i&&(i=!1);var n=i?this.text:this._lowercaseText;t=i?t:t.toLowerCase();for(var o=t.length,s=n.indexOf(t),a=s+o;a>=s;)this.addColor(e,s),s++;this.addColor(this.style.fill,a)},e.prototype.animate=function(t,e){void 0===t&&(t=.1),void 0===e&&(e=0),this.game.time.events.remove(this._delayTimer),this.game.time.events.remove(this._repeatTimer),this._letterTime=t,this._textLength=this.text.length,this._textToAnimate=this.text.split("");for(var i=0,n=this._textLength;n>=i;)this.addColor("rgba(0,0,0,0)",i),i++;this._delayTimer=this.game.time.events.add(e*Phaser.Timer.SECOND,this._startTextAnimation,this)},e._addSettings=function(t,e){if(!e)return t;for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},Object.defineProperty(e.prototype,"realHeight",{get:function(){return this.scale.y*this.texture.frame.height/this.game.resolution},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"realWidth",{get:function(){return this.scale.x*this.texture.frame.width/this.game.resolution},enumerable:!0,configurable:!0}),e.DEFAULT_FONT_SIZE=12,e.DEFAULT_FONT_COLOR="#000000",e.DEFAULT_FONT="Helvetica Neue, Arial",e.GLOBAL_PADDING_X=0,e.GLOBAL_PADDING_Y=0,e}(Phaser.Text),t("Text",o)}}}),System.register("dijon/display",["dijon/display/BitmapText","dijon/display/Component","dijon/display/Group","dijon/display/InvisibleButton","dijon/display/NineSliceImage","dijon/display/Spine","dijon/display/Spine2","dijon/display/Sprite","dijon/display/Text"],function(t,e){"use strict";e&&e.id;return{setters:[function(e){t({BitmapText:e.BitmapText})},function(e){t({Component:e.Component})},function(e){t({Group:e.Group})},function(e){t({InvisibleButton:e.InvisibleButton})},function(e){t({NineSliceImage:e.NineSliceImage})},function(e){t({Spine:e.Spine})},function(e){t({Spine2:e.Spine2})},function(e){t({Sprite:e.Sprite})},function(e){t({Text:e.Text})}],execute:function(){}}}),System.register("dijon/utils/Placeholders",["dijon/application","dijon/utils/Textures","dijon/display"],function(t,e){"use strict";var i,n,o,s;e&&e.id;return{setters:[function(t){i=t},function(t){n=t},function(t){o=t}],execute:function(){s=function(){function t(){}return Object.defineProperty(t,"game",{get:function(){return i.Application.getInstance().game},enumerable:!0,configurable:!0}),t.image=function(e,i,n,o){void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o="");var s=new Phaser.Image(t.game,e,i,n);return s.name=o,s},t.button=function(e,i,s,a,r,h,d,u,c,l,p){var f=this;void 0===e&&(e=0),void 0===i&&(i=0),void 0===s&&(s=100),void 0===a&&(a=50),void 0===r&&(r=!1),void 0===h&&(h="button"),void 0===d&&(d=null),void 0===u&&(u=null),void 0===c&&(c=16777215),void 0===l&&(l=16711680),void 0===p&&(p=65280);var g=new Phaser.Sprite(t.game,e,i),_=new o.Text(.5*s,.55*a," "+h+" ","Arial",r?25:.6*a,"#000000");_.centerPivot(),_.name="Label",r&&(s=_.realWidth+10,a=_.realHeight+10,_.position.set(.5*s,.55*a));var m=t.image(0,0,n.Textures.roundedRect(s,a,10,c),"Up"),y=t.image(0,0,n.Textures.roundedRect(s,a,10,l),"Over"),v=t.image(0,0,n.Textures.roundedRect(s,a,10,p),"Down");return y.visible=!1,v.visible=!1,g.addChild(m),g.addChild(y),g.addChild(v),g.addChild(_),g.inputEnabled=!0,g.input.useHandCursor=!0,g.events.onInputUp.add(function(){v.visible=!1,y.visible=!1,m.visible=!0,d&&d.call(u,f)}),g.events.onInputDown.add(function(){v.visible=!0,y.visible=!1,m.visible=!1}),g.events.onInputOver.add(function(){v.visible=!1,y.visible=!0,m.visible=!1}),g.events.onInputOut.add(function(){v.visible=!1,y.visible=!1,m.visible=!0}),g.getBounds=function(){return new PIXI.Rectangle(0,0,m.width,m.height)},g},t}(),t("Placeholders",s)}}}),System.register("dijon/utils/Time",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){}return t.delayedCall=function(t,e,n){for(var o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return void 0===o&&(o=[]),o.unshift(t,e,n),i.Application.getInstance().game.time.events.add.apply(i.Application.getInstance().game.time.events,o)},t}(),t("Time",n)}}}),System.register("dijon/utils/Util",[],function(t,e){"use strict";var i;e&&e.id;return{setters:[],execute:function(){i=function(){function t(){}return t.isNumber=function(t){return+t===+t},t}(),t("Util",i)}}}),System.register("dijon/utils/Log",["dijon/application","dijon/display","dijon/utils"],function(t,e){"use strict";var i,n,o,s;e&&e.id;return{setters:[function(t){i=t},function(t){n=t},function(t){o=t}],execute:function(){s=function(){function t(){}return t.init=function(){this.static_logLines=new Array,this.static_logLinesText=new Array,this.static_gameInstance=i.Application.getInstance().game,this.static_gameHalfHeight=.5*this.static_gameInstance.height|0,this._createWindowGroup()},t.show=function(){i.Application.static_debugMode&&(this.static_window.y=this.static_gameHalfHeight,this.static_window.visible=!0)},t.hide=function(){i.Application.static_debugMode&&(this.static_window.y=this.static_gameInstance.height,this.static_window.visible=!1)},t.debug=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i.Application.static_debugMode){0===e.length?console.log(t):console.log(t,e);for(var o="",s=0;s<e.length;s++){var a=e[s];o+=" ",o+=a.toString()}null===t?t="null":void 0===t&&(t="undefined"),this.static_logLines.push(t+o),this._addLine(this.static_logLines.length,"#ffffff")}},t.warn=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i.Application.static_debugMode){0===e.length?console.warn(t):console.warn(t,e);for(var o="",s=0;s<e.length;s++){var a=e[s];o+=" ",o+=a.toString()}null===t?t="null":void 0===t&&(t="undefined"),this.static_logLines.push(t+o),this._addLine(this.static_logLines.length,"#ffff00")}},t.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(i.Application.static_debugMode){0===e.length?console.error(t):console.error(t,e);for(var o="",s=0;s<e.length;s++){var a=e[s];o+=" ",o+=a.toString()}null===t?t="null":void 0===t&&(t="undefined"),this.static_logLines.push(t+o),this._addLine(this.static_logLines.length,"#ff0000")}},t.isVisible=function(){return this.static_window.visible},t._createWindowGroup=function(){this.static_window=this.static_gameInstance.addToStage.dGroup(0,this.static_gameInstance.height,"Log Window"),this.static_windowBG=this.static_window.addChild(o.Placeholders.image(0,this.static_gameHalfHeight,o.Textures.rect(this.static_gameInstance.width,this.static_gameHalfHeight,0,.7,!0),"BG")),this.static_windowBG.anchor.set(0,1),this.static_window.visible=!1},t._addLine=function(t,e){console.log("displaying",this.static_logLines[t-1]);var i=new n.Text(5,0,this.static_logLines[t-1],"Arial",14,e,"left",!0,this.static_gameInstance.width-10);i.anchor.set(0,1),i.name="LogLine"+t,this.static_windowBG.addChild(i),this.static_logLinesText.push(i);for(var o=this.static_windowBG.children.length-2;o>=0;--o){var s=this.static_windowBG.getChildAt(o);s.y-=i.realHeight-this.LINE_SPACING,Math.abs(s.y-5+s.realHeight)>=this.static_gameHalfHeight-s.realHeight-10&&(this.static_logLines[this.static_backOffset]=null,this.static_logLinesText[this.static_backOffset].destroy(),this.static_logLinesText[this.static_backOffset]=null,2*++this.static_backOffset>=this.static_logLines.length&&(this.static_logLines=this.static_logLines.slice(this.static_backOffset),console.log(this.static_logLines),this.static_logLinesText=this.static_logLinesText.slice(this.static_backOffset),console.log(this.static_logLinesText),this.static_backOffset=0))}},t.MAX_LOG_LINES=22,t.LINE_SPACING=5,t.static_logLines=null,t.static_logLinesText=null,t.static_backOffset=0,t.static_window=null,t.static_windowBG=null,t.static_gameInstance=null,t.static_gameHalfHeight=0,t}(),t("Log",s)}}}),System.register("dijon/utils/PrefabBuilder",["dijon/display"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){}return t.addPrefabClass=function(e,i,n){void 0===n&&(n=!1),t.prefabClasses.hasOwnProperty(i)?n?t.prefabClasses[i]=e:(console.warn("Entry for: "+i+" already exists in Prefab Classes"),console.warn("Use overrideExisting flag if you wish replace existing entry")):t.prefabClasses[i]=e},t.createSceneFrom=function(e,i){null!==i&&(i.prefabs=[],i.groups=[],t.createPrefabObjects(e,i))},t.createPrefabObjects=function(e,i){if(null!==i&&null!==e)for(var n=0;n<e.prefabs.length;n++)if(t.prefabClasses.hasOwnProperty(e.prefabs[n].type)){var o=this.createPrefab(e.prefabs[n]);null!==o&&("state"!==e.prefabs[n].parent?null!==i.groups[e.prefabs[n].parent]&&void 0!==i.groups[e.prefabs[n].parent]?i.groups[e.prefabs[n].parent].addInternal.existing(o):null!==i.prefabs[e.prefabs[n].parent]&&void 0!==i.prefabs[e.prefabs[n].parent]?(i.prefabs[e.prefabs[n].parent].addChild(o),e.prefabs[n].assignToParent===!0&&i.prefabs[e.prefabs[n].parent].assignPrefab(o)):i.add.existing(o):i.add.existing(o),"group"===e.prefabs[n].type?i.groups[o.name]=o:i.prefabs[o.name]=o)}else console.warn("No PrefabClasses entry found for: "+e.prefabs[n].type)},t.createPrefab=function(t){var e=null;return this.prefabClasses.hasOwnProperty(t.type)&&(e=this.prefabClasses[t.type].CreateFromData(t)),e},t.prefabClasses={group:i.Group,text:i.Text,sprite:i.Sprite},t}(),t("PrefabBuilder",n)}}}),System.register("dijon/utils",["dijon/utils/Device","dijon/utils/Logger","dijon/utils/Notifications","dijon/utils/Placeholders","dijon/utils/Textures","dijon/utils/Time","dijon/utils/Util","dijon/utils/Log","dijon/utils/PrefabBuilder"],function(t,e){"use strict";e&&e.id;return{setters:[function(e){t({Device:e.Device})},function(e){t({Logger:e.Logger})},function(e){t({Notifications:e.Notifications})},function(e){t({Placeholders:e.Placeholders})},function(e){t({Textures:e.Textures})},function(e){t({Time:e.Time})},function(e){t({Util:e.Util})},function(e){t({Log:e.Log})},function(e){t({PrefabBuilder:e.PrefabBuilder})}],execute:function(){}}}),System.register("dijon/core/AnalyticsManager",["dijon/utils"],function(t,e){"use strict";var i,n,o;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(t,e){void 0===t&&(t=!0),void 0===e&&(e=null),this.enabled=t,this.category=e,this._trackerId=null,this._startedWithTrackerId=!1}return t.prototype.trackEvent=function(t,e,n){if(void 0===t&&(t=null),void 0===e&&(e=null),void 0===n&&(n=null),this.active&&this.enabled){if(!t)throw new o("No action defined");if(i.Device.cocoon&&void 0!==window.analytics){var s=window.analytics;return void s.trackEvent(this.category,t,e,n)}n?this.ga("send","event",this.category,t,e,n):e?this.ga("send","event",this.category,t,e):this.ga("send","event",this.category,t)}},t.prototype.trackOmnitureEvent=function(t,e,i){return this.enabled?"undefined"==typeof window.trackFlashEvent?!1:void window.trackFlashEvent(t,e,i):void 0},t.prototype._startWithTrackerId=function(){if(i.Device.cocoon&&void 0!==window.analytics){var t=window.analytics;t.startTrackerWithId(this._trackerId)}},Object.defineProperty(t.prototype,"trackerId",{get:function(){return this._trackerId},set:function(t){this._trackerId=t,this._startedWithTrackerId||this._startWithTrackerId()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return window.ga||i.Device.cocoon&&void 0!==window.analytics?!0:!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ga",{get:function(){return window.ga},enumerable:!0,configurable:!0}),t}(),t("AnalyticsManager",n),o=function(){function t(t){this.message=t,this.name="AnalyticsException"}return t}(),t("AnalyticsException",o)}}}),System.register("dijon/core/AssetManager",["dijon/application","dijon/utils","dijon/display"],function(t,e){"use strict";var i,n,o,s;e&&e.id;return{setters:[function(t){i=t},function(t){n=t},function(t){o=t}],execute:function(){s=function(){function t(){this._data={},this._baseURL="",this._pathObj={},this._assetPath=null,this._dataPath=null,this._spriteSheetPath=null,this._imgPath=null,this._videoPath=null,this._spinePath=null,this._fontPath=null,this._bitmapFontPath=null,this._physicsPath=null,this._audioSpritePath=null,this._soundPath=null,this._soundDecodingModifier=2,this._res=1,this._resolution=null,this._loadData={},this._autoLoadData={},this._completedLoads={},this._requiredData={},this._currentAssetList=null,this._hasFiles=!1,this._soundsToDecode=[],this._isLoadingQueue=!1,this._fileCompleteProgress=0,this._maxPercent=100,this._numSounds=0,this._soundsDecoded=0,this._cacheBustVersion="",this.onLoadStart=new Phaser.Signal,this.onFileStart=new Phaser.Signal,this.onFileComplete=new Phaser.Signal,this.onLoadComplete=new Phaser.Signal,this.onLoadCompleteAndAudioDecoded=new Phaser.Signal,this.onBackgroundLoadStart=new Phaser.Signal,this.onBackgroundFileStart=new Phaser.Signal,this.onBackgroundFileComplete=new Phaser.Signal,this.onBackgroundLoadComplete=new Phaser.Signal,this.onBackgroundLoadCompleteAndAudioDecoded=new Phaser.Signal,this._init()}return t.prototype._init=function(){this.app=i.Application.getInstance(),this.game=this.app.game,this.baseURL="",this.paths=null,this.resolution=this.game.resolution,this._soundsToDecode=[]},t.prototype._parseAssetList=function(t,e){var i=this;this._autoLoadData[t]=e.autoload,this._requiredData[t]=e.required,this._loadData[t]=[],e.assets.forEach(function(e){i._loadData[t].push(e)})},t.prototype._loadAssets=function(t){var e,i=this._loadData[t];for(e=0;e<i.length;e++)this._loadAsset(i[e])},t.prototype._backgroundLoadStart=function(){this.onBackgroundLoadStart.dispatch()},t.prototype._backgroundFileComplete=function(t,e,i,n){this.game.cache.checkKey(Phaser.Cache.IMAGE,e)&&this._setBaseTextureResolution(this.game.cache.getBaseTexture(e)),this._fileCompleteProgress=t,this.onBackgroundFileComplete.dispatch(t,e,i,n)},t.prototype._backgroundLoadComplete=function(){this.game.load.onFileComplete.remove(this._backgroundFileComplete,this),this.onBackgroundLoadComplete.dispatch(),this._checkSoundDecoding(this.onBackgroundLoadCompleteAndAudioDecoded)},t.prototype._gameLoadStart=function(){this.onLoadStart.dispatch()},t.prototype._gameFileStart=function(){this.onFileStart.dispatch()},t.prototype._gameFileComplete=function(t,e,i,n){this.game.cache.checkKey(Phaser.Cache.IMAGE,e)&&this._setBaseTextureResolution(this.game.cache.getBaseTexture(e)),this._fileCompleteProgress=t,this.onFileComplete.dispatch(this.getLoadProgress(),e,i,n)},t.prototype._setBaseTextureResolution=function(t){t&&t.source.src.indexOf("@"+this.resolution+"x")>=0&&(t.resolution=this.resolution)},t.prototype._gameLoadComplete=function(){this._completedLoads[this._currentAssetList]=!0,this.onLoadComplete.dispatch(),this.game.load.onFileStart.remove(this._gameFileStart,this),this.game.load.onFileComplete.remove(this._gameFileComplete,this),this._checkSoundDecoding(this.onLoadCompleteAndAudioDecoded)},t.prototype._checkSoundDecoding=function(t){var e,i,n;if(this._soundsToDecode&&this._soundsToDecode.length>0)for(i=0;i<this._soundsToDecode.length;i++)n=this._soundsToDecode[i].isAudioSprite,e=this.game.add.sound(this._soundsToDecode[i].url),e.__isAudioSprite=n,e.eventToDispatch=t,e.onDecoded.addOnce(this._onSoundDecoded,this);else t.dispatch()},t.prototype._onSoundDecoded=function(t){var e=this._soundsToDecode.indexOf(t.key);this._soundsToDecode.splice(e,1),"undefined"!=typeof this.game.audio&&"undefined"!=typeof this.game.audio.addAudio&&(t.__isAudioSprite&&this.game.add.audioSprite(t.key),this.game.audio.addAudio(t.key,t.__isAudioSprite)),this._soundsDecoded++,this._maxPercent=100-this._numSounds*this.soundDecodingModifier+this._soundsDecoded*this.soundDecodingModifier,this._gameFileComplete(100),0===this._soundsToDecode.length&&t.eventToDispatch.dispatch()},t.prototype._getAssetKey=function(t){if(t.indexOf(".")<0)return t;var e=t.split(".");return e.pop(),e.join("")},t.prototype._getExtension=function(t){return t.split(".").pop()},t.prototype._getResolution=function(e){var i="";return"string"==typeof e&&(e=parseFloat(e)),void 0===e&&(e=this.resolution),e>1.5&&(i=t.RESOLUTION_2X),i},t.prototype._loadAsset=function(e){var i=e.type,n=e.url||e.key;switch(i){case t.ASSET_LIST:this._loadAssets(e.id);break;case t.SOUND:this.loadSound(n,e.extensions);break;case t.AUDIO_SPRITE:this.loadAudioSprite(n,e.extensions);break;case t.IMAGE:this.loadImage(n,this._getResolution(e.resolution));break;case t.VIDEO:this.loadVideo(n,this._getResolution(e.resolution));break;case t.ATLAS:this.loadAtlas(n,this._getResolution(e.resolution));break;case t.TEXT:this.loadText(n);break;case t.JSON:this.loadJSON(n);break;case t.TILEMAP:this.loadTilemap(n);break;case t.TILEDMAP:this.loadTiledmap(n,e.assets);break;case t.PHYSICS:this.loadPhysics(n);break;case t.SPINE:this.loadSpine(n,this._getResolution(e.resolution));break;case t.BITMAP_FONT:this.loadBitmapFont(n,this._getResolution(e.resolution))}},t.prototype._parseData=function(){var t;for(t in this._data)this._parseAssetList(t,this._data[t])},t.prototype._getCacheBustedUrl=function(t){return void 0===this._cacheBustVersion||""===this._cacheBustVersion?t:t+"?v="+this._cacheBustVersion},t.prototype.loadText=function(t){var e=this._getAssetKey(t);return this.game.load.text(e,this._getCacheBustedUrl(this._dataPath+"/"+t))},t.prototype.loadJSON=function(t){return t=this._getAssetKey(t),this.game.load.json(t,this._getCacheBustedUrl(this._dataPath+"/"+t+".json"))},t.prototype.loadTilemap=function(t){return t=this._getAssetKey(t),this.game.load.tilemap(t,this._getCacheBustedUrl(this._dataPath+"/tilemap/"+t+".json"),null,Phaser.Tilemap.TILED_JSON)},t.prototype.loadTiledmap=function(e,i){var n=this;if(void 0===Phaser.Plugin.Tiled)return console.log("tiledmap requires the phaser-tiled plugin from https://github.com/englercj/phaser-tiled"),null;var o=Phaser.Plugin.Tiled.utils.cacheKey;this.game.load.tiledmap(o(e,"tiledmap"),this._getCacheBustedUrl(this._dataPath+"/tilemap/"+e+".json"),null,Phaser.Tilemap.TILED_JSON),i.forEach(function(i){switch(i.type){case t.TILEDMAP_TILESET:case t.TILEDMAP_LAYER:n.loadTiledmapImage(e,i.type,i)}})},t.prototype.loadTiledmapImage=function(t,e,i){var n=Phaser.Plugin.Tiled.utils.cacheKey,o="",s=this._getAssetKey(i.url),a=n(t,"tileset",s);"string"!=typeof i.resolution&&(o=this._getResolution(i.resolution));var r=this._getAssetKey(s+o+"."+this._getExtension(i.url));console.log(i.url,a),this.game.load.image(a,this._getCacheBustedUrl(this._spriteSheetPath+"/"+r+".png"))},t.prototype.loadPhysics=function(t){return t=this._getAssetKey(t),this.game.load.physics(t,this._getCacheBustedUrl(this._physicsPath+"/"+t+".json"))},t.prototype.loadAtlas=function(t,e){return"string"!=typeof e&&(e=this._getResolution(e)),this.game.cache.checkImageKey(t)?t:this.game.load.atlasJSONHash(t,this._getCacheBustedUrl(this._spriteSheetPath+"/"+t+e+".png"),this._getCacheBustedUrl(this._spriteSheetPath+"/"+t+e+".json"))},t.prototype.loadImage=function(t,e){"string"!=typeof e&&(e=this._getResolution(e));var i=this._getAssetKey(t);return this.game.cache.checkImageKey(i)?i:(t=i+e+"."+this._getExtension(t),this.game.load.image(i,this._getCacheBustedUrl(this._imgPath+"/"+t)))},t.prototype.loadVideo=function(t,e){"string"!=typeof e&&(e=this._getResolution(e));var i=this._getAssetKey(t);return this.game.cache.checkVideoKey(i)?i:(t=i+e+"."+this._getExtension(t),this.game.load.video(i,this._getCacheBustedUrl(this._videoPath+"/"+t)))},t.prototype.loadSpine=function(t,e){"string"!=typeof e&&(e=this._getResolution(e)),""===e&&(e="@1x");var i=this._getAssetKey(t);if(this.game.cache.checkImageKey(i))return i;t=i+e+".png";var n=i+".json",s=i+e+".atlas";this.game.load.json(i+".json",this._getCacheBustedUrl(this._spinePath+"/"+n)),this.game.load.text(i+".atlas",this._getCacheBustedUrl(this._spinePath+"/"+s)),this.game.load.image(i+".png",this._getCacheBustedUrl(this._spinePath+"/"+t)),o.Spine.AUTO_MESH===!0&&-1===i.indexOf(o.Spine.NON_MESH_SUFFIX)&&this.loadSpine(i+o.Spine.NON_MESH_SUFFIX)},t.prototype.loadBitmapFont=function(t,e){"string"!=typeof e&&(e=this._getResolution(e)),this.game.load.bitmapFont(t,this._getCacheBustedUrl(this._bitmapFontPath+"/"+t+e+".png"),this._getCacheBustedUrl(this._bitmapFontPath+"/"+t+e+".json"))},t.prototype.loadAudio=function(t,e,i){var n,o;if(!this.game.cache.checkSoundKey(t)||!this.game.cache.getSound(t).isDecoded){if("undefined"==typeof n&&(n="sound"),e.indexOf(",")>=0&&(e=e.split(",")),this.game.device.iOS&&-1===e.indexOf("m4a")&&e.unshift("m4a"),"object"==typeof e){o=[];for(var s=0;s<e.length;s++)o.push(this._getCacheBustedUrl((i?this._audioSpritePath:this._soundPath)+"/"+t+"."+e[s]))}else o=this._getCacheBustedUrl((i?this._audioSpritePath:this._soundPath)+"/"+n+"/"+t+"."+e);i?this.game.load.audiosprite(t,o,this._audioSpritePath+"/"+t+".json"):this.game.load.audio(t,o),this._soundsToDecode.push({url:t,isAudioSprite:i})}},t.prototype.loadSound=function(t,e){return this.loadAudio(t,e,!1)},t.prototype.loadAudioSprite=function(t,e){return this.loadAudio(t,e,!0)},t.prototype.loadAssets=function(t,e){if(void 0===e&&(e=!1),this._currentAssetList=t,this.game.load.onFileComplete.remove(this._backgroundFileComplete,this),this.game.load.onFileComplete.remove(this._gameFileComplete,this),this._hasFiles=!1,void 0!==this._data){if(void 0===this._data[t]||void 0===this._data[t].assets||this._data[t].assets.length<1)return console.log("no preload data registered for ",t);if(this._loadAssets(t),this._hasFiles=this.game.load.totalQueuedFiles()>0,e?(this.game.load.onLoadStart.addOnce(this._backgroundLoadStart,this),this.game.load.onFileComplete.add(this._backgroundFileComplete,this),this.game.load.onLoadComplete.addOnce(this._backgroundLoadComplete,this)):(this.game.load.onLoadStart.addOnce(this._gameLoadStart,this),this.game.load.onFileStart.add(this._gameFileStart,this),this.game.load.onFileComplete.add(this._gameFileComplete,this),this.game.load.onLoadComplete.addOnce(this._gameLoadComplete,this)),!this._hasFiles)return this._gameLoadStart(),this._gameFileComplete(100),void this._gameLoadComplete();this._numSounds=this._soundsToDecode.length,this._soundsDecoded=0,this._maxPercent=100-this._numSounds*this.soundDecodingModifier,e&&this.game.load.start()}},t.prototype.loadQueue=function(){if(!this._isLoadingQueue){if("undefined"==typeof this._data)return console.log("no preload queue to load");var t,e,i;for(e in this._data)if(this._autoLoadData[e])for(t=this._data[e].assets,i=0;i<t.length;i++)this._loadAsset(t[i]);this.game.load.start(),this._isLoadingQueue=!0,this.game.load.onLoadStart.addOnce(this._backgroundLoadStart,this),this.game.load.onFileComplete.add(this._backgroundFileComplete,this),this.game.load.onLoadComplete.addOnce(this._backgroundLoadComplete,this)}},t.prototype.getLoadProgress=function(){var t=this._fileCompleteProgress*this._maxPercent/100;return t},t.prototype.allSoundsDecoded=function(){return 0===this._soundsToDecode.length},t.prototype.setData=function(t){this._data=t,this._loadData={},this._parseData(),this.sendNotification(n.Notifications.ASSET_MANAGER_DATA_SET,this._data)},t.prototype.clearAssets=function(e,i,o,s,a,r){void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===a&&(a=!0),void 0===r&&(r=!0);var h=this._data[e];if(console.log("clearing: ",e,h),!h||"undefined"==typeof h||!h.assets||h.assets.length<1)return console.log("no assets",h);for(var d=h.assets,u=0;u<d.length;u++)console.log("clearing type",d[u].type),d[u].type!==t.ASSET_LIST?this.clearAsset(d[u],i,o,s,a,r):this.clearAssets(d[u].id,i,o,s,a,r);this._completedLoads[e]=!1,this.sendNotification(n.Notifications.ASSET_MANAGER_ASSETS_CLEARED,e)},t.prototype.clearAsset=function(e,i,n,o,s,a){void 0===i&&(i=!0),void 0===n&&(n=!0),void 0===o&&(o=!0),void 0===s&&(s=!0),void 0===a&&(a=!0);var r=e.type,h=e.url,d=e.required;if(d)return void console.log("the "+r+" asset: "+h+" is required and will not be cleared");switch(r){case t.AUDIO:i&&(this.game.sound.removeByKey(h),this.game.cache.removeSound(h));break;case t.IMAGE:o&&this.clearImage(h);break;case t.ATLAS:n&&(this.clearImage(h),this.game.cache.removeJSON(h));break;case t.TEXT:s&&this.game.cache.removeText(h);break;case t.JSON:a&&this.game.cache.removeJSON(h);break;case t.PHYSICS:a&&this.game.cache.removePhysics(h);break;case t.SPINE:this.clearSpineAsset(e.url)}},t.prototype.clearImage=function(t){var e=this.game.cache.getImage(t,!0);this.game.cache.removeImage(t),console.log(e.base),console.log(e.base.imageUrl),e&&void 0!==e.data.dispose&&e.data.dispose(),e=null},t.prototype.clearSpineAsset=function(t){this.game.cache.removeJSON(t+".json"),this.game.cache.removeText(t+".atlas"),this.clearImage(t+".png")},t.prototype.hasLoadedAssets=function(t){return this._completedLoads[t]===!0},t.prototype.sendNotification=function(t,e){return this.app.sendNotification(t,e)},Object.defineProperty(t.prototype,"baseURL",{set:function(t){t&&void 0!==t&&"/"!==t.charAt(t.length-1)&&(t+="/"),this._baseURL=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paths",{set:function(t){this._pathObj=t||{},this._assetPath=this._baseURL+(this._pathObj.assetPath||"assets"),this._dataPath=this._baseURL+(this._pathObj.dataPath||"assets/data"),this._spriteSheetPath=this._baseURL+(this._pathObj.spritesheetPath||"assets/img/spritesheets"),this._imgPath=this._baseURL+(this._pathObj.imgPath||"assets/img"),this._videoPath=this._baseURL+(this._pathObj.imgPath||"assets/video"),this._spinePath=this._baseURL+(this._pathObj.spinePath||"assets/spine"),this._fontPath=this._baseURL+(this._pathObj.fontPath||"assets/fonts"),this._bitmapFontPath=this._baseURL+(this._pathObj.bitmapFontPath||"assets/fonts/bitmap"),this._audioSpritePath=this._baseURL+(this._pathObj.audioSpritePath||"assets/audio/sprite"),this._soundPath=this._baseURL+(this._pathObj.soundPath||"assets/audio/sound"),this._physicsPath=this._baseURL+(this._pathObj.physicsPath||"assets/data/physics")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resolution",{get:function(){return this._res},set:function(e){void 0===e&&(e=this.game.resolution),
this._res=e,this._resolution="",this._res>1.5&&(this._resolution=t.RESOLUTION_2X)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"soundDecodingModifier",{get:function(){return this._soundDecodingModifier},set:function(t){void 0===t&&(t=2),this._soundDecodingModifier=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cacheBustVersion",{set:function(t){this._cacheBustVersion=""+t},enumerable:!0,configurable:!0}),t.AUDIO="audio",t.SOUND="sound",t.AUDIO_SPRITE="audioSprite",t.IMAGE="image",t.VIDEO="video",t.ATLAS="atlas",t.TEXT="text",t.JSON="json",t.TILEMAP="tilemap",t.TILEDMAP="tiledmap",t.TILEDMAP_TILESET="tileset",t.TILEDMAP_LAYER="layer",t.PHYSICS="physics",t.SPINE="spine",t.BITMAP_FONT="bitmapFont",t.ASSET_LIST="assetList",t.RESOLUTION_2X="@2x",t.RESOLUTION_3X="@3x",t}(),t("AssetManager",s)}}}),System.register("dijon/core/AudioManager",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){this._defaultVolume=1,this._sprites={},this._sounds={},this._markerLookup={},this.game=i.Application.getInstance().game}return t.prototype._addAudio=function(t,e){return void 0===e&&(e=!1),e===!0?this._parseAudioSprite(t,this.game.add.audioSprite(t)):this._allowMultiple(this.game.add.sound(t))},t.prototype._parseAudioSprite=function(t,e){for(var i in e.sounds)this._allowMultiple(e.sounds[i]),this._markerLookup[i]=t;return e},t.prototype._allowMultiple=function(t){return t.allowMultiple=!0,t},t.prototype._getKeyFromMarkerName=function(t){if("undefined"!=typeof this._markerLookup[t])return this._markerLookup[t];for(var e in this._sprites)if("undefined"!=typeof this._sprites[e].sounds[t])return this._markerLookup[t]=e,e;return!1},t.prototype._playSpriteMarker=function(t,e,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!0),"undefined"!=typeof i?"string"==typeof i&&(i=i.indexOf("+")>=0||i.indexOf("-")>=0?this._defaultVolume+parseFloat(i):parseFloat(i)):i=this._defaultVolume,n=n||!1,o=o===!1?!1:!0,this._sprites[t].play(e,i)},t.prototype._stopSpriteMarker=function(t,e){return"undefined"==typeof this._sprites||"undefined"==typeof this._sprites[t]?!1:this._sprites[t].stop(e)},t.prototype._stopSound=function(t){return t.stop()},t.prototype.addAudio=function(t,e){return void 0===e&&(e=!1),e===!0?this.addAudioSprite(t):this.addSound(t)},t.prototype.addSound=function(t){return"undefined"!=typeof this._sounds[t]?this._sounds[t]:(this._sounds[t]=this.game.add.audio(t),this._sounds[t].allowMultiple=!0,this._sounds[t])},t.prototype.addAudioSprite=function(t){return"undefined"!=typeof this._sprites[t]?this._sprites[t]:(this._sprites[t]=this._addAudio(t,!0),this._sprites[t])},t.prototype.playAudio=function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!0),this._getKeyFromMarkerName(t)?this.playSpriteMarker(t,e,i,n):this.playSound(t,e,i,n)},t.prototype.playDelayedAudio=function(t,e,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!0),this._getKeyFromMarkerName(e)?this.playDelayedSpriteMarker(t,e,i,n,o):this.playDelayedSound(t,e,i,n,o)},t.prototype.playSound=function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!0),"undefined"==typeof this._sounds[t]?null:(e="undefined"==typeof e?this._defaultVolume:e,this._sounds[t].play("",0,e,i,n))},t.prototype.getSound=function(t,e,i,n){return void 0===i&&(i=!1),void 0===n&&(n=!0),"undefined"==typeof this._sounds[t]?null:(e="undefined"==typeof e?this._defaultVolume:e,this._sounds[t])},t.prototype.playSpriteMarker=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!0);var o=this._getKeyFromMarkerName(t);return o?this._playSpriteMarker(o,t,e,i,n):(console.log("marker not found",t),null)},t.prototype.playDelayedSound=function(t,e,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!0),this.game.time.events.add(t,this.playSound,this,e,i,n,o),null},t.prototype.playDelayedSpriteMarker=function(t,e,i,n,o){return void 0===n&&(n=!1),void 0===o&&(o=!0),this.game.time.events.add(t,this.playSpriteMarker,this,e,i,n,o),null},t.prototype.stopAudio=function(t){return this._getKeyFromMarkerName(t)?this.stopSpriteMarker(t):this.stopSound(t)},t.prototype.stopSound=function(t){return"undefined"!=typeof this._sounds&&"undefined"!=typeof this._sounds[t]?this._sounds[t].stop():void 0},t.prototype.stopSpriteMarker=function(t){var e=this._getKeyFromMarkerName(t);return e?void this._stopSpriteMarker(e,t):void console.log("marker not found",t)},t.prototype.removeSound=function(t){return"undefined"==typeof this._sounds||"undefined"==typeof this._sounds[t]?!1:void(this._sounds[t]&&(this.stopSound(t),this._sounds[t].destroy(),delete this._sounds[t]))},t.prototype.removeSprite=function(t){"undefined"!=typeof this._sprites&&"undefined"!=typeof this._sprites[t]&&(this.stopSpriteMarker(t),this._sprites[t]=null,delete this._sprites[t])},t.prototype.fade=function(t,e,i,n){return void 0===n&&(n=!1),t?(t.fadeTween&&t.fadeTween&&this.game.tweens.remove(t.fadeTween),t.fadeTween=this.game.add.tween(t).to({volume:e},i||300,Phaser.Easing.Linear.None),n===!0&&t.fadeTween.onComplete.addOnce(function(){this._stopSound(t)},this),t.fadeTween.start()):void 0},Object.defineProperty(t.prototype,"defaultVolume",{get:function(){return this._defaultVolume},set:function(t){this._defaultVolume=t},enumerable:!0,configurable:!0}),t}(),t("AudioManager",n)}}}),System.register("dijon/core/Game",["dijon/application","dijon/core","dijon/utils"],function(t,e){"use strict";var i,n,o,s;e&&e.id;return{setters:[function(t){i=t},function(t){n=t},function(t){o=t}],execute:function(){s=function(t){function e(e){t.call(this,e),this.onWorldInputDisabled=new Phaser.Signal,this.onWorldInputEnabled=new Phaser.Signal}return __extends(e,t),e.prototype.boot=function(){t.prototype.boot.call(this),this.app=i.Application.getInstance(),this.asset=new n.AssetManager,this.sequence=new n.SequenceManager,this.transition=new n.TransitionManager,this.storage=new n.StorageManager,this.audio=new n.AudioManager,this.analytics=new n.AnalyticsManager(this.config.analytics),this.add=null,this.add=new n.GameObjectFactory(this),this.addLayers(),this.addMouseCallbacks(),this.setFactoryDefaultLayer(this.gameLayer)},e.prototype.addPlugins=function(){var t=this;this.config.plugins&&this.config.plugins.length>0&&this.config.plugins.forEach(function(e){"function"==typeof Phaser.Plugin[e]&&t.add.plugin(Phaser.Plugin[e])})},e.prototype.setFactoryDefaultLayer=function(t){this.add.setDefaultLayer(t||this.world)},e.prototype.addLayers=function(){this.backgroundLayer=this.add.dGroup(0,0,"_background_layer",!0),this.stage.setChildIndex(this.backgroundLayer,0),this.gameLayer=this.add.dGroup(0,0,"_game_layer"),this.uiLayer=this.add.dGroup(0,0,"_ui_layer"),this.uiLayer.fixedToCamera=!0,this.stageLayer=this.add.dGroup(0,0,"_stage_layer",!0)},e.prototype.addMouseCallbacks=function(){this.device.desktop&&(this.input.mouse.mouseOverCallback=this.mouseOver,this.input.mouse.mouseOutCallback=this.mouseOut)},e.prototype.mouseOut=function(){i.Application.getInstance().sendNotification(o.Notifications.MOUSE_LEAVE_GLOBAL)},e.prototype.mouseOver=function(){i.Application.getInstance().sendNotification(o.Notifications.MOUSE_ENTER_GLOBAL)},e.prototype.disableElementInput=function(t){if(t.input&&t.inputEnabled===!0&&(t.wasEnabled=!0,t.inputEnabled=!1),t.children.length>0)for(var e=0;e<t.children.length;e++)this.disableElementInput(t.children[e])},e.prototype.enableElementInput=function(t){if(t.input&&t.inputEnabled===!1&&t.wasEnabled&&(t.wasEnabled=!1,t.inputEnabled=!0),t.children.length>0)for(var e=0;e<t.children.length;e++)this.enableElementInput(t.children[e])},e.prototype.disableInput=function(t){return t.forEach(function(t){return t instanceof Phaser.Group?this.disableInput(t):this.disableElementInput(t)},this)},e.prototype.enableInput=function(t){return t.forEach(function(t){return t instanceof Phaser.Group?this.enableInput(t):this.enableElementInput(t)},this)},e.prototype.disableGameInput=function(){this.disableInput(this.gameLayer),this.onWorldInputDisabled.dispatch()},e.prototype.enableGameInput=function(){this.enableInput(this.gameLayer),this.onWorldInputEnabled.dispatch()},e.prototype.changeState=function(t,e){return this.gameLayer.removeAll(!0,!0),this.state.start(t,!1,!1,e)},Object.defineProperty(e.prototype,"addToGame",{get:function(){return this.add.targetGroup=this.gameLayer,this.add},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addToBackground",{get:function(){return this.add.targetGroup=this.backgroundLayer,this.add},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addToUI",{get:function(){return this.add.targetGroup=this.uiLayer,this.add},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addToStage",{get:function(){return this.add.targetGroup=this.stageLayer,this.add},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addToWorld",{get:function(){return this.add.targetGroup=this.world,this.add},enumerable:!0,configurable:!0}),e}(Phaser.Game),t("Game",s)}}}),System.register("dijon/core/GameObjectFactory",["dijon/display"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(){t.apply(this,arguments),this._targetGroup=null,this._defaultLayer=this.world}return __extends(e,t),e.prototype.existing=function(t){var e=this.targetGroup;return this.targetGroup=null,e.add(t)},e.prototype.image=function(t,e,i,n,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=this.targetGroup),this.targetGroup=null,o.add(new Phaser.Image(this.game,t,e,i,n))},e.prototype.sprite=function(t,e,i,n,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=this.targetGroup),this.targetGroup=null,o.create(t,e,i,n)},e.prototype.creature=function(t,e,i,n,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===o&&(o=this.targetGroup),this.targetGroup=null;var s=new Phaser.Creature(this.game,t,e,i,n);return o.add(s),s},e.prototype.group=function(t,e,i,n,o){return void 0===e&&(e="group"),void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===o&&(o=0),void 0===t&&i!==!0&&(t=this.targetGroup),this.targetGroup=null,new Phaser.Group(this.game,t,e,i,n,o)},e.prototype.physicsGroup=function(t,e,i,n){return void 0===t&&(t=0),void 0===i&&(i="group"),void 0===n&&(n=!1),void 0===e&&(e=this.targetGroup),this.targetGroup=null,new Phaser.Group(this.game,e,i,n,!0,t)},e.prototype.spriteBatch=function(t,e,i){return void 0===e&&(e="spriteBatch"),void 0===i&&(i=!1),void 0===t&&(t=this.targetGroup),this.targetGroup=null,new Phaser.SpriteBatch(this.game,t,e,i)},e.prototype.tileSprite=function(t,e,i,n,o,s,a){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=this.targetGroup),this.targetGroup=null,a.add(new Phaser.TileSprite(this.game,t,e,i,n,o,s))},e.prototype.rope=function(t,e,i,n,o,s){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===s&&(s=this.targetGroup),this.targetGroup=null,s.add(new Phaser.Rope(this.game,t,e,i,n,o))},e.prototype.text=function(t,e,i,n,o){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=""),void 0===o&&(o=this.targetGroup),this.targetGroup=null,o.add(new Phaser.Text(this.game,t,e,i,n))},e.prototype.button=function(t,e,i,n,o,s,a,r,h,d){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===d&&(d=this.targetGroup),this.targetGroup=null,d.add(new Phaser.Button(this.game,t,e,i,n,o,s,a,r,h))},e.prototype.graphics=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=this.world),i.add(new Phaser.Graphics(this.game,t,e))},e.prototype.bitmapText=function(t,e,i,n,o,s){return void 0===n&&(n=""),void 0===o&&(o=32),void 0===s&&(s=this.targetGroup),this.targetGroup=null,s.add(new Phaser.BitmapText(this.game,t,e,i,n,o))},e.prototype.dSprite=function(t,e,n,o,s,a,r){return void 0===r&&(r=this.targetGroup),this.targetGroup=null,r.add(new i.Sprite(t,e,n,o,s,a))},e.prototype.dGroup=function(t,e,n,o,s,a,r,h){return void 0===h&&o!==!0?(h=this.targetGroup,this.targetGroup=null,h.add(new i.Group(t,e,n,o,s,a,r))):new i.Group(t,e,n,o,s,a,r)},e.prototype.dText=function(t,e,n,o,s,a,r,h,d,u,c,l){return void 0===l&&(l=this.targetGroup),this.targetGroup=null,l.add(new i.Text(t,e,n,o,s,a,r,h,d,u,c))},e.prototype.dBitmapText=function(t,e,n,o,s,a,r,h,d,u,c){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=null),void 0===o&&(o=""),void 0===s&&(s=12),void 0===a&&(a="left"),void 0===r&&(r=16777215),void 0===h&&(h=!0),void 0===d&&(d=!0),void 0===u&&(u=!1),void 0===c&&(c=this.targetGroup),this.targetGroup=null,c.add(new i.BitmapText(t,e,n,o,s,a,r,h,d,u))},e.prototype.spine=function(t,e,n,o){return void 0===t&&(t=""),void 0===e&&(e=0),void 0===n&&(n=0),void 0===o&&(o=this.targetGroup),this.targetGroup=null,o.add(new i.Spine(t,e,n))},e.prototype.setDefaultLayer=function(t){console.log("CAUTION: Changing the default layer will change the target group for .add"),this._defaultLayer=t},Object.defineProperty(e.prototype,"defaultLayer",{get:function(){return this._defaultLayer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetGroup",{get:function(){return this._targetGroup||this._defaultLayer},set:function(t){this._targetGroup=t},enumerable:!0,configurable:!0}),e}(Phaser.GameObjectFactory),t("GameObjectFactory",n)}}}),System.register("dijon/core/SequenceManager",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){this._defaultInterval=20,this.game=i.Application.getInstance().game}return t.prototype._executeMethod=function(t,e,i,n){var o=t.shift();"undefined"!=typeof o&&"undefined"!=typeof e&&e&&o.call(e),0===t.length&&i&&n&&i.call(n)},t.prototype.run=function(t,e,i,n,o){if("undefined"==typeof e)throw new Error("context must be provided for the sequence methods");if("undefined"==typeof i&&(i=this._defaultInterval),0===t.length&&"undefined"!=typeof n&&"undefined"!=typeof o)return void n.call(o);if(0!==i){var s=this.game.time.events.repeat(i,t.length,this._executeMethod,this,t,e,"undefined"==typeof n?null:n,"undefined"==typeof o?null:o);s.timer.paused=!1}else for(;t.length>0;)this._executeMethod(t,e,"undefined"==typeof n?null:n,"undefined"==typeof o?null:o)},t}(),t("SequenceManager",n)}}}),System.register("dijon/core/State",["dijon/application","dijon/utils"],function(t,e){"use strict";var i,n,o;e&&e.id;return{setters:[function(t){i=t},function(t){n=t}],execute:function(){o=function(t){function e(){t.call(this),this.prefabs={},this.groups={},this._audio=[],this._mediator=null,this._sceneData=null}return __extends(e,t),e.prototype.init=function(t){},e.prototype.preload=function(){this.preloadID&&this.game.asset.loadAssets(this.preloadID)},e.prototype.createPrefabFromData=function(t){return null!=t?n.PrefabBuilder.createPrefabObjects(t,this):null},e.prototype.assignPrefab=function(t){},e.prototype._findPrefab=function(t){return this.prefabs.hasOwnProperty(t)?this.prefabs[t]:null},e.prototype._findGroup=function(t){return this.groups.hasOwnProperty(t)?this.groups[t]:null},e.prototype.create=function(){return this.game.asset.allSoundsDecoded()?(null!==this._sceneData&&n.PrefabBuilder.createSceneFrom(this._sceneData,this),this.buildInterface(),this.afterBuildInterface(),void this.startBuild()):void this.game.asset.onLoadCompleteAndAudioDecoded.addOnce(this.create,this)},e.prototype.shutdown=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),e&&this.removeMediator(),i&&this.removeAudio(),t.prototype.shutdown.call(this)},e.prototype.listBuildSequence=function(){return[]},e.prototype.buildInterface=function(){},e.prototype.afterBuildInterface=function(){},e.prototype.startBuild=function(){this.game.sequence.run(this.listBuildSequence(),this,this.buildInterval,this.preAfterBuild,this)},e.prototype.preAfterBuild=function(){"undefined"!=typeof this.game.transition&&this.game.transition.canTransitionOut()?this.game.transition.canTransitionOut()&&(this.game.transition.onTransitionOutComplete.addOnce(this.afterBuild,this),this.game.transition.transitionOut()):this.afterBuild()},e.prototype.afterBuild=function(){},e.prototype.addAudio=function(t){return this._audio||(this._audio=[]),this._audio.push(t),t},e.prototype.removeAudio=function(){var t;if(this._audio)for(;this._audio.length>0;)t=this._audio.pop(),"undefined"!=typeof t&&null!=t&&"undefined"!=typeof t.stop&&("undefined"!=typeof t.onStop&&t.onStop.removeAll(),t.stop())},e.prototype.removeMediator=function(){this._mediator&&(this._mediator.destroy(),this._mediator=null)},Object.defineProperty(e.prototype,"preloadID",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buildInterval",{get:function(){return 10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"add",{get:function(){return this.game.addToGame},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"app",{get:function(){return i.Application.getInstance()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"game",{get:function(){return this.app.game},enumerable:!0,configurable:!0}),e}(Phaser.State),t("State",o)}}}),System.register("dijon/core/StorageManager",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){this.game=i.Application.getInstance().game,this._init()}return t.prototype._init=function(){this._localStorageAvailable=this._getIsLocalStorageAvailable(),console.log("local storage available",this._localStorageAvailable)},t.prototype._getIsLocalStorageAvailable=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},t.prototype._getString=function(t){if("string"==typeof t)return t;var e;try{e=JSON.stringify(t)}catch(i){return console.log("Could not convert"+t+" to json"),null}return e},t.prototype.getFromLocalStorage=function(t,e){void 0===e&&(e=!0);var i=localStorage.getItem(t);return"undefined"==typeof i?(console.log("no data saved with the key",t),null):(e!==!1&&(i=JSON.parse(i)),i)},t.prototype.saveToLocalStorage=function(t,e){if(!this._localStorageAvailable)return console.log("no local storage"),!1;try{localStorage.setItem(t,this._getString(e))}catch(i){console.log("your data could not be saved")}},t.prototype.clearFromLocalStorage=function(t){if(!this._localStorageAvailable)return console.log("no local storage"),!1;try{localStorage.removeItem(t)}catch(e){}},t}(),t("StorageManager",n)}}}),System.register("dijon/core/TransitionManager",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(){this.onTransitionOutComplete=new Phaser.Signal,this.onTransitionInComplete=new Phaser.Signal,this._isInTransition=!1,this._transition=null,this._transitions={},this._exceptions={},this._fromState=null,this._toState=null,this._args=null,this.game=i.Application.getInstance().game}return t.prototype._add=function(t,e,i,n){this._transitions[t]={outHandler:e,preloadHandler:i,inHandler:n}},t.prototype._getTransition=function(t,e){var i=this._transitions[t+"/"+e];return"undefined"==typeof i&&(i=this._transitions.all),"undefined"==typeof i?null:i},t.prototype._transitionInComplete=function(){return this._transition=this._getTransition(this._fromState,this._toState),this._transition?("function"==typeof this._transition.preloadHandler.loadStart&&this.game.asset.onLoadStart.addOnce(this._transition.preloadHandler.loadStart,this._transition.preloadHandler),"function"==typeof this._transition.preloadHandler.loadProgress&&this.game.asset.onFileComplete.add(this._transition.preloadHandler.loadProgress,this._transition.preloadHandler),this.game.asset.onLoadCompleteAndAudioDecoded.addOnce(this._preloadComplete,this),this.onTransitionInComplete.dispatch(),void this.game.changeState(this._toState,this._args)):!1},t.prototype._transitionOutComplete=function(){this._transition=null,this.onTransitionOutComplete.dispatch(),this._isInTransition=!1},t.prototype._preloadComplete=function(){return this._transition=this._getTransition(this._fromState,this._toState),this._transition?(this.game.asset.onFileComplete.remove(this._transition.preloadHandler.loadProgress,this._transition.preloadHandler),void("function"==typeof this._transition.preloadHandler.loadComplete&&this._transition.preloadHandler.loadComplete())):!1},t.prototype._clearTransition=function(){this._transition.outHandler.transitionInComplete.remove(this._transitionOutComplete,this),this._transition.inHandler.transitionOutComplete.remove(this._transitionInComplete,this),this.game.asset.onLoadCompleteAndAudioDecoded.remove(this._preloadComplete,this),this.game.asset.onLoadStart.remove(this._transition.preloadHandler.loadStart,this._transition.preloadHandler),this.game.asset.onFileComplete.remove(this._transition.preloadHandler.loadProgress,this._transition.preloadHandler),this._transition=null},t.prototype.add=function(t,e,i,n,o){var s;return arguments.length<5?"all"===t?(s=[].slice.call(arguments,1),2===arguments.length?this._add("all",s[0],s[0],s[0]):this._add("all",s[0],s[1],s[2])):(s=[].slice.call(arguments,2),this._add(t+"/"+e,s[0],s[0],s[0])):this._add(t+"/"+e,i,n,o)},t.prototype.addAll=function(t){return this._add("all",t,t,t)},t.prototype.addException=function(t){this._exceptions[t]=!0},t.prototype.remove=function(t,e){1===arguments.length?(this._transitions[t]=null,delete this._transitions[t]):(this._transitions[t+"/"+e]=null,delete this._transitions[t+"/"+e])},t.prototype.to=function(t,e){this._transition&&this._clearTransition(),this._exceptions[t]||(void 0!==e&&(this._args=e),this._fromState=this.game.state.current,this._toState=t,this._transition=this._getTransition(this._fromState,this._toState),this._transition||(console.log("no transition found for:",this.game.state.current+" to "+t),this.game.changeState(this._toState)),this.transitionIn())},t.prototype.transitionIn=function(){this._transition&&"function"==typeof this._transition.outHandler.transitionIn&&(this._isInTransition=!0,this._transition.outHandler.transitionInComplete.addOnce(this._transitionInComplete,this),this._transition.outHandler.transitionIn())},t.prototype.canTransitionOut=function(){return!this._exceptions[this.game.state.current]&&this._transition&&this._transition.inHandler&&"function"==typeof this._transition.inHandler.transitionOut},t.prototype.transitionOut=function(){this._transition.inHandler.transitionOutComplete.addOnce(this._transitionOutComplete,this),this._transition.inHandler.transitionOut()},Object.defineProperty(t.prototype,"isInTransition",{get:function(){return this._isInTransition},enumerable:!0,configurable:!0}),t}(),t("TransitionManager",n)}}}),System.register("dijon/core",["dijon/core/AnalyticsManager","dijon/core/AssetManager","dijon/core/AudioManager","dijon/core/Game","dijon/core/GameObjectFactory","dijon/core/SequenceManager","dijon/core/State","dijon/core/StorageManager","dijon/core/TransitionManager"],function(t,e){"use strict";e&&e.id;return{setters:[function(e){t({AnalyticsManager:e.AnalyticsManager,AnalyticsException:e.AnalyticsException})},function(e){t({AssetManager:e.AssetManager})},function(e){t({AudioManager:e.AudioManager})},function(e){t({Game:e.Game})},function(e){t({GameObjectFactory:e.GameObjectFactory})},function(e){t({SequenceManager:e.SequenceManager})},function(e){t({State:e.State})},function(e){t({StorageManager:e.StorageManager})},function(e){t({TransitionManager:e.TransitionManager})}],execute:function(){}}}),System.register("dijon/mvc/Model",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(t,e){void 0===t&&(t=null),void 0===e&&(e=null),this.modelName=e,this.app=i.Application.getInstance(),this.game=this.app.game,t&&this.setData(t),this.app.registerModel(this)}return t.prototype.onRegister=function(){},t.prototype.onRemoved=function(){},t.prototype.getKeyExists=function(t){return null!==this.game.cache.getJSON(t)},t.prototype.setData=function(t){return this.getKeyExists(t)?(this._data=this.game.cache.getJSON(t),this._data):(console.log("Model:: cannot set data from key "+t+". Is it in the Phaser cache?"),!1)},t.prototype.getData=function(){return this._data},t.prototype.destroy=function(){this.app.removeModel(this)},Object.defineProperty(t.prototype,"name",{get:function(){return this.modelName||t.MODEL_NAME},enumerable:!0,configurable:!0}),t.MODEL_NAME="Model",t}(),t("Model",n)}}}),System.register("dijon/mvc/CopyModel",["dijon/mvc/Model"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(t){function e(e){void 0===e&&(e=null),t.call(this,e),this._languages={},this._languages.en=this._data}return __extends(e,t),e.prototype.getCopy=function(t,e){return this.getCopyGroup(t)[e]},e.prototype.getCopyGroup=function(t){return this._data[t]},e.prototype.addLanguage=function(t,e){if(!this.getKeyExists(e))throw new Error("cannot add an alternate language from key "+e+". Is it in the Phaser cache?");this._languages[t]=this.game.cache.getJSON(e)},e.prototype.changeLanguage=function(t){if("undefined"==typeof this._languages[t])throw new Error("there is no language "+t);this._data=this._languages[t]},Object.defineProperty(e.prototype,"name",{get:function(){return e.MODEL_NAME},enumerable:!0,configurable:!0}),e.MODEL_NAME="copyModel",e}(i.Model),t("CopyModel",n)}}}),System.register("dijon/mvc/Mediator",["dijon/application"],function(t,e){"use strict";var i,n;e&&e.id;return{setters:[function(t){i=t}],execute:function(){n=function(){function t(t,e,n){void 0===t&&(t=null),void 0===e&&(e=!0),void 0===n&&(n=null),this._viewComponent=t,this.mediatorName=null,this.app=i.Application.getInstance(),this.game=this.app.game,this.mediatorName=n,e&&this.register()}return t.prototype.register=function(){this.app.registerMediator(this)},t.prototype.remove=function(){this.app.removeMediator(this)},t.prototype.onRegister=function(){},t.prototype.onRemoved=function(){},t.prototype.destroy=function(){this.remove()},t.prototype.listNotificationInterests=function(){return[]},t.prototype.handleNotification=function(t){},t.prototype.sendNotification=function(t,e){this.app.sendNotification(t,e)},Object.defineProperty(t.prototype,"viewComponent",{get:function(){return this._viewComponent},set:function(t){this._viewComponent=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.mediatorName||t.MEDIATOR_NAME},enumerable:!0,configurable:!0}),t.MEDIATOR_NAME="Mediator",t}(),t("Mediator",n)}}}),System.register("dijon/mvc/Notification",[],function(t,e){"use strict";var i;e&&e.id;return{setters:[],execute:function(){i=function(){function t(t,e){void 0===e&&(e=null),this._name=t,this._body=e}return t.prototype.getName=function(){return this._name},t.prototype.setBody=function(t){this._body=t},t.prototype.getBody=function(){return this._body},t.prototype.destroy=function(){this._body=null,this._name=null},t}(),t("Notification",i)}}}),System.register("dijon/mvc",["dijon/mvc/CopyModel","dijon/mvc/Mediator","dijon/mvc/Model","dijon/mvc/Notification"],function(t,e){"use strict";e&&e.id;return{setters:[function(e){t({CopyModel:e.CopyModel})},function(e){t({Mediator:e.Mediator})},function(e){t({Model:e.Model})},function(e){t({Notification:e.Notification})}],execute:function(){}}}),System.register("dijon/application/Application",["dijon/mvc","dijon/core","dijon/utils"],function(t,e){"use strict";var i,n,o,s;e&&e.id;return{setters:[function(t){i=t},function(t){n=t},function(t){o=t}],execute:function(){s=function(){function t(){var e=this;if(this._mediator=null,this._models={},this._mediators={},this._observerMap={},t.instance)throw Error(t.SINGLETON_MSG);t.instance=this,window.addEventListener("hashchange",function(){t._getHashQuery(),e.windowHashChange()},!1),this.createGame(),this.startGame()}return t.prototype.windowHashChange=function(){},t.prototype.createGame=function(){this.game=new n.Game({width:800,height:600,parent:"game-container",renderer:Phaser.AUTO,transparent:!1})},t.prototype.startGame=function(){},t.prototype.addPlugins=function(){this.game.addPlugins(),t.static_debugMode&&o.Log.init()},t.prototype.registerModel=function(t){if(this._models[t.name])throw new Error('Application:: a model with the name "'+t.name+'" already exists.');return this._models[t.name]=t,t.onRegister(),t},t.prototype.retrieveModel=function(t){return this._models[t]||null},t.prototype.removeModel=function(t){var e=t.name,i=this._models[e];i&&(i.onRemoved(),delete this._models[e])},t.prototype.registerMediator=function(t){if(this._mediators[t.name])throw new Error('Application:: a mediator with the name "'+t.name+'" already exists.');this._mediators[t.name]=t,this.registerObserver(t),t.onRegister()},t.prototype.retrieveMediator=function(t){return this._mediators[t]||null},t.prototype.removeMediator=function(t){var e=this,i=t.name,n=this._mediators[i];n&&(n.listNotificationInterests().forEach(function(t){e.removeObserver(t,n)}),n.onRemoved(),delete this._mediators[i])},t.prototype.registerObserver=function(t){var e=this;t.listNotificationInterests().forEach(function(i){void 0===e._observerMap[i]&&(e._observerMap[i]=[]),e._observerMap[i].push(t)})},t.prototype.removeObserver=function(t,e){var i=null,n=null,o=0;for(i=this._observerMap[t],o=i.length;o--;)if(n=i[o],n===e){i.splice(o,1);break}0==i.length&&delete this._observerMap[t]},t.prototype.sendNotification=function(t,e){var n=new i.Notification(t,e);this._notifyObservers(n),n.destroy(),n=null},t.prototype._notifyObservers=function(t){var e=null,i=t.getName(),n=this._observerMap[i];n&&(e=n.slice(0),e.forEach(function(e){e.handleNotification(t)}))},t._getHashQuery=function(){t._hashQuery={},window.location.hash&&void 0!==window.location.hash||(window.location.hash="");var e=window.location.hash.substr(1,window.location.hash.length),i=e.split("&");i.forEach(function(e){var i=e.split("=");t._hashQuery[i[0]]=/^\d+$/.test(i[1])?parseInt(i[1]):i[1]})},t.getInstance=function(){return t.instance||(t.instance=new t),t.instance},t.queryVar=function(e){return void 0===t._hashQuery&&t._getHashQuery(),t._hashQuery[e]||null},t.instance=null,t.SINGLETON_MSG="Application singleton already constructed!",t.static_debugMode=!1,t}(),t("Application",s)}}}),System.register("dijon/application",["dijon/application/Application"],function(t,e){"use strict";e&&e.id;return{setters:[function(e){t({Application:e.Application})}],execute:function(){}}}),System.register("lib",["dijon/application","dijon/core","dijon/display","dijon/mvc","dijon/utils"],function(t,e){"use strict";function i(e){var i={};for(var n in e)"default"!==n&&(i[n]=e[n]);t(i)}e&&e.id;return{setters:[function(t){i(t)},function(t){i(t)},function(t){i(t)},function(t){i(t)},function(t){i(t)}],execute:function(){}}});